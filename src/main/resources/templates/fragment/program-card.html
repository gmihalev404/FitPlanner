<div th:fragment="card(prog)" class="program-card glass-panel p-0 overflow-hidden h-100 program-card border-0">
    <div class="position-relative">
        <img th:if="${prog.imageUrl != null && !prog.imageUrl.isEmpty()}"
             th:src="${prog.imageUrl}"
             class="w-100 program-img"
             style="height: 180px; object-fit: cover;"
             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">

        <div class="w-100 program-placeholder d-flex align-items-center justify-content-center"
             style="height: 180px; background: rgba(255,255,255,0.05);"
             th:styleappend="${prog.imageUrl != null && !prog.imageUrl.isEmpty()} ? 'display: none !important;' : 'display: flex !important;'">
            <i class="bi bi-lightning-fill fs-1 color-soft opacity-25"></i>
        </div>

        <span class="badge position-absolute top-0 end-0 m-3"
              style="background: var(--delimiter-color); color: #000; font-weight: 800;"
              th:text="${prog.difficulty}">STRENGTH</span>


        <form th:action="@{/programs/fork/{id}(id=${prog.id})}" method="post" class="position-absolute top-0 start-0 m-3">
            <button type="submit" class="btn-fork" title="Add to my programs">
                <i class="bi bi-diagram-2"></i>
            </button>
        </form>
    </div>
    <div class="p-4">
        <div class="d-flex justify-content-between align-items-start mb-2">
            <h6 class="color-main fw-bold mb-0" th:text="${prog.name}">Program Name</h6>
        </div>
        <p class="color-soft x-small mb-4 text-truncate-2" style="height: 3rem;" th:text="${prog.descriptionShort}">Description...</p>
        <a th:href="@{/programs/details/{id}(id=${prog.id})}" class="btn btn-sm btn-outline-custom w-100 rounded-pill">View Details</a>
    </div>
</div>