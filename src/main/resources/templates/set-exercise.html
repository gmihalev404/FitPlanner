<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:class="${theme != null ? theme : 'dark'}"
      th:lang="${language != null ? language : 'en'}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="#{set.add_exercise}">Set Exercise</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <link rel="stylesheet" th:href="@{/css/common.css(v=${#dates.createNow().time})}">
    <link rel="stylesheet" th:href="@{/css/navbar.css(v=${#dates.createNow().time})}">
    <link rel="stylesheet" th:href="@{/css/footer.css(v=${#dates.createNow().time})}">
    <link rel="stylesheet" th:href="@{/css/dark-theme.css(v=${#dates.createNow().time})}">
    <link rel="stylesheet" th:href="@{/css/light-theme.css(v=${#dates.createNow().time})}">
    <link rel="stylesheet" th:href="@{/css/search-bar.css(v=${#dates.createNow().time})}">
    <link rel="stylesheet" th:href="@{/css/scrollbar.css(v=${#dates.createNow().time})}">

    <link rel="stylesheet" th:href="@{/css/set-exercise.css(v=${#dates.createNow().time})}">
</head>
<body>
<div th:replace="~{fragment/navbar.html::navbar}"></div>
<div class="background-section">
    <div class="container set-exercise-container">
        <div class="row text-center">
            <div class="col-12">
                <h2 class="exercise-name" th:text="${exercise.name}"></h2>
            </div>
        </div>
        <form th:object="${dto}"
              th:action="${dto.id != null} ? @{/edit-exercise} : @{/add-exercise}"
              method="post"
              class="row form-grid">

            <input type="hidden" th:field="*{id}">
            <input type="hidden" name="exerciseId" th:value="${exercise.id}">
            <input type="hidden" name="day" th:value="${day}">

            <div class="col-12 col-sm-6 col-lg-3">
                <label class="form-label" th:text="#{set.weight}">Weight</label>
                <input th:field="*{weight}"
                       th:placeholder="${programsUserDto.measuringUnits == 'kg' ? 'kg' : 'lbs'}"
                       type="number"
                       class="form-control"
                       min="1" max="500" step="0.1" required>
            </div>

            <div class="col-12 col-sm-6 col-lg-3">
                <label class="form-label" th:text="#{set.reps}">Reps</label>
                <input th:field="*{reps}" type="number" class="form-control" min="1" max="100" required>
            </div>

            <div class="col-12 col-sm-6 col-lg-3">
                <label class="form-label" th:text="#{set.sets}">Sets</label>
                <input th:field="*{sets}" type="number" class="form-control" min="1" max="10" required>
            </div>

            <div class="col-12 col-lg-3 d-flex align-items-end mt-4">
                <button type="submit" class="submit-btn bg-success w-100"
                        th:text="${dto.id != null} ? #{set.save_changes} : #{set.add_exercise}">
                </button>
            </div>
        </form>
        <form th:action="${dto.exerciseId != null} ? @{/close-log} : @{/close-set}" method="post" class="close-form">
            <button type="submit" class="close-btn">âœ•</button>
        </form>
    </div>
</div>
<footer th:replace="~{fragment/footer.html::footer}"></footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/notifications.js(v=${#dates.createNow().time})}" defer></script>
</body>
</html>